name: Self-hosted develop workflow
on:
  repository_dispatch:
  push:
jobs:
  ubuntu:
    name: ubuntu
    runs-on: ubuntu-latest
    container: ubuntu:${{ matrix.containers }}
    strategy:
      fail-fast: false
      matrix:
        containers: ["focal", "bionic", "xenial"]
        php-versions: ['5.6', '7.0', '7.1', '7.2', '7.3', '7.4']
    steps:
      - name: Install sudo and git
        run: |
          apt-get update && apt-get install -y sudo curl make software-properties-common unzip
          sudo LC_ALL=C.UTF-8 add-apt-repository ppa:ondrej/php
          sudo apt-get update
          sudo apt-get install php$version php$version-dev php$version-xml
      - run: sudo pecl install -f xdebug
      - run: php -v && php -m  

name: 'ext'
on:
  push:
jobs:
  run:
    runs-on: ${{ matrix.operating-system }}
    strategy:
      fail-fast: false
      matrix:
        operating-system: [ubuntu-latest]
    name: PHP ${{ matrix.php-versions }} Test on ${{ matrix.operating-system }}
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Install PHP
        uses: shivammathur/setup-php@verbose
        with:
          php-version: 8.0
      - name: Test config
        run: |
          sed -i "s/\$fp = @fopen(\$phpini, 'wb');/var_dump(\$newini);\$fp = @fopen(\$phpini, 'wb');/g" /usr/local/php/8.0/share/pear/PEAR/Command/Install.php
          pear config-get php_ini
          pecl config-get php_ini
          sudo pecl install -f pdo_sqlsrv-5.9.0preview1
          cat /usr/local/php/8.0/etc/conf.d/99-pecl.ini
          sudo pecl install -f sqlsrv-5.9.0preview1
          cat /usr/local/php/8.0/etc/conf.d/99-pecl.ini
      - name: Testing PHP version
        run: php -v
      - name: Testing Extensions
        run: php -m

name: 'Test'
on: [push]
jobs:
  tests:  
    strategy:
      matrix:
        os: [ubuntu-20.04, ubuntu-18.04, ubuntu-16.04]
    runs-on: ${{ matrix.os }}
    steps:
      - name: Install apache2
        run: |
          sudo apt-fast install -y apache2
          sudo service apache2 stop
      - name: Install nginx
        run: |
          sudo apt-fast install -y nginx
          sudo service nginx stop
      - name: Test setup
        run: |
          apache2 --version
          echo "---- $? -----"
          nginx -v
          echo "---- $? -----"

          for service in apache2 nginx; do
            for action in start status stop; do
              sudo service "$service" "$action"
            done
          done          
          

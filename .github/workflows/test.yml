  
name: Runner workflow
on:
  push:
jobs:
  ubuntu:
    name: runner
    runs-on: ubuntu-latest
    steps:
      - name: Setup PHP
        uses: shivammathur/setup-php@develop
        with:
          php-version: 7.4
          tools: pecl
          extensions: protobuf
      - name: Test
        run: |
          php -v && php -m
          git clone https://github.com/grpc/grpc
          cd grpc
          bazel build @com_google_protobuf//:protoc
          bazel build src/compiler:grpc_php_plugin
          sudo cp ./bazel-bin/external/com_google_protobuf/protoc /usr/bin/protoc
          sudo cp ./bazel-bin/src/compiler/grpc_php_plugin /usr/bin/grpc_php_plugin
          git clone https://github.com/grpc/grpc
          cd examples/php
          ./greeter_proto_gen.sh
          composer install

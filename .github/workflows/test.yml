name: 'Test'
on: [push]
env:
  HOMEBREW_NO_INSTALL_CLEANUP: 1
  HOMEBREW_NO_AUTO_UPDATE: 1
jobs:
  tests:  
    strategy:
      matrix:
        os: [macos-10.15]
    runs-on: ${{ matrix.os }}
    steps:
      - name: Install apache2
        run: brew install httpd
      - name: Install nginx
        run: brew install nginx
      - name: Test setup
        run: |
          for service in httpd nginx; do
            for action in start status stop; do
              brew services "$action" "$service"
            done
          done

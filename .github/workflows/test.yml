name: Test workflow on windows
on: [push]
jobs:
  run:    
    runs-on: ${{ matrix.operating-system }}
    strategy:    
      matrix:
        operating-system: [windows-latest, windows-2016]
    name: Test setup tool
    steps: 
    - name: Setup Tool
      continue-on-error: true
      run: |
        $url = "http://cs.sensiolabs.org/download/php-cs-fixer-v2.phar"
        $php_dir = "C:\tools\php"
        $tool = "php-cs-fixer"
        Invoke-WebRequest -UseBasicParsing -Uri $url -OutFile $php_dir\$tool
        Set-Content -Path $php_dir\$tool.bat -Value "php $php_dir\$tool"
        Add-Content -Path $PsHome\profile.ps1 -Value "New-Alias $tool $php_dir\$tool.bat"
        php-cs-fixer 
    - name: Test Tool
      continue-on-error: true
      run: php-cs-fixer

name: 'Test'
on: [push]
jobs:
  tests:  
    strategy:
      matrix:
        os: [ubuntu-20.04, ubuntu-18.04, ubuntu-16.04]
        php: ['7.2','7.3','7.4','8.0']
    runs-on: ${{ matrix.os }}
    steps:        
      - uses: shivammathur/setup-php@v2
        with:
          php-version: '8.0'
          extensions: mysql, pdo_mysql
      - name: Test mysql
        run: |
          php -m
          php -r "if(! extension_loaded('mysqli')) {throw new Exception('mysqli not found');}"
          php -r "if(! extension_loaded('mysqlnd')) {throw new Exception('mysqlnd not found');}"
          php -r "if(! extension_loaded('pdo_mysql')) {throw new Exception('pdo_mysql not found');}"
         
          

name: 'Package'
on: [push]
jobs:
  tests:  
    strategy:
      fail-fast: false
      matrix:
        os: [macos-10.15]
        php: [5.3, 5.4, 5.5]
    runs-on: ${{ matrix.os }}
    steps:
      - name: Setup PHP
        uses: shivammathur/setup-php@v2
        with:
          php-version: ${{ matrix.php }}
      - name: Add imagick
        env:
          PHP_VERSION: ${{ matrix.php }}
        run: |
          curl -o /tmp/imagick.mpkg -sL https://github.com/shivammathur/php5-darwin/releases/latest/download/php${PHP_VERSION%.*}.tar.zst
          sudo installer -pkg /tmp/imagick.mpkg -target /
      - name: Test
        run: php -v && php -m

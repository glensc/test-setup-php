name: Test workflow
on: [push]
jobs:
  test:    
    name: test
    runs-on: ${{ matrix.os }}
    strategy:
      fail-fast: false
      matrix:
        os: [ubuntu-latest, windows-latest, macos-latest]
    steps:
      - name: Test exit on windows
        if: matrix.os == 'windows-latest'
        continue-on-error: true
        run: |
          $cross = ([char]10007)
          Function Add-Log($mark, $subject, $message) {
            $code = if ($mark -eq $cross) { "31" } else { "32" }
            printf "\033[%s;1m%s \033[0m\033[34;1m%s \033[0m\033[90;1m%s \033[0m\n" $code $mark $subject $message
          }
          Add-Log $cross "Exit" "Test exit"
          exit 1
      - name: Test exit if not on windows
        if: matrix.os != 'windows-latest'
        continue-on-error: true
        run: |
          cross="âœ—"
          add_log() {
            mark=$1
            subject=$2
            message=$3
            if [ "$mark" = "$tick" ]; then
              printf "\033[32;1m%s \033[0m\033[34;1m%s \033[0m\033[90;1m%s\033[0m\n" "$mark" "$subject" "$message"
            else
              printf "\033[31;1m%s \033[0m\033[34;1m%s \033[0m\033[90;1m%s\033[0m\n" "$mark" "$subject" "$message"
            fi
          }
          add_log "$cross" "Exit" "Test exit"
          exit 1
        
          

on:
  - push

name: ext

env:
  PHP_EXTENSIONS: >
    date,
    dom,
    json,
    libxml,
    mbstring,
    pdo_sqlite,
    Phar,
    soap,
    tokenizer,
    xml,
    xmlwriter,
    zlib
jobs:
  test:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        php: ['5.3', '5.4', '5.5', '5.6', '7.0', '7.1', '7.2', '7.3', '7.4', '8.0', '8.1']
        os: [ubuntu-latest, windows-latest, macos-latest]
    steps:
      - name: Without none
        uses: shivammathur/setup-php@develop
        with:
          php-version: ${{ matrix.php }}
      - run: php -v && php -m        
      - name: With none
        uses: shivammathur/setup-php@develop
        with:
          php-version: ${{ matrix.php }}
          extensions: none, ${{ env.PHP_EXTENSIONS }}
      - run: php -v && php -m    

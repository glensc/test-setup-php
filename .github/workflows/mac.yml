name: Test workflow
on: [push]
jobs:
  run:    
    runs-on: ${{ matrix.operating-system }}
    strategy:
      fail-fast: false
      matrix:      
        operating-system: [macos-10.15, ubuntu-latest]
    name: Test
    steps:
    - name: Checkout
      uses: actions/checkout@v2
      
    - name: Remove brew
      run: |
        if command -v brew; then
          sudo rm -rf $(brew --prefix)
        fi  

    - name: Set up Homebrew
      env:
        HOMEBREW_FORCE_HOMEBREW_ON_LINUX: 1
      uses: shivammathur/actions/setup-homebrew@shivammathur-patch-git-retry
      
    - name: Test brew
      run: brew -v

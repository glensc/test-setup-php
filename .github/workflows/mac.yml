name: Test workflow
on: [push]
jobs:
  run:    
    runs-on: ${{ matrix.operating-system }}
    container: ubuntu:focal
    strategy:
      fail-fast: false
      matrix:      
        operating-system: [ubuntu-latest]
    name: Test
    steps:
    - name: Checkout
      uses: actions/checkout@v2
      
    - name: Add requirements
      run: apt-get update && apt-get install curl git sudo -y
      
    - name: Add brew
      run: |
        curl -o /tmp/install.sh -sL https://raw.githubusercontent.com/Homebrew/install/master/install.sh
        sed -i 's/== "0"/!= "0"/' /tmp/install.sh
        bash /tmp/install.sh
        echo "/home/linuxbrew/.linuxbrew/bin" >> $GITHUB_PATH
        export PATH="/home/linuxbrew/.linuxbrew/bin:$PATH"
        brew update
    - name: Test brew
      env:
        HOMEBREW_NO_INSTALL_CLEANUP: 1
        HOMEBREW_NO_AUTO_UPDATE: 1
      run: brew install zstd
    - name: Test zstd
      run: zstd -V
      

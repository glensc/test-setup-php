name: Versions workflow
on: [push]
jobs:
  run:    
    runs-on: ${{ matrix.operating-system }}
    strategy:
      max-parallel: 6
      matrix:
        operating-system: [ubuntu-latest, ubuntu-16.04, macOS-latest]
        php-versions: ['7.1', '7.2', '7.3']
    name: PHP ${{ matrix.php-versions }} Test on ${{ matrix.operating-system }}
    steps:
      - name: Checkout Master
        uses: actions/checkout@master
      - name: list bin
        run: ls /usr/bin && ls /usr/local/bin
      - name: check php.ini file location
        run: php${{ matrix.php-versions}} --ini | grep "Loaded Configuration" | sed -e "s|.*:s*||" | sed "s/\s//g"
      - name: add to php.ini
        run: sudo chmod 777 $(php${{ matrix.php-versions}} --ini | grep "Loaded Configuration" | sed -e "s|.*:s*||") && sudo echo "date.timezone=Asia/Kolkata" >> `php${{ matrix.php-versions}} --ini | grep "Loaded Configuration" | sed -e "s|.*:s*||"`        
      - name: Check PHP ini
        run: php${{ matrix.php-versions }} -v && php${{ matrix.php-versions }} -r "echo ini_get('date.timezone');"
